# 4계절 딸기 생육을 위한 스마트팜 센서 데이터 및 딥러닝 예측 모델(2024년 2월 28일 출간)

> http://journal.dcs.or.kr/xml/39771/39771.pdf

## 소개
농가에서 가장 높은 소득원인 딸기를 4계절 재배할 수 있는 스마트팜과 스마트팜 생육 환경 센서 데이터를 예측하는 딥러닝 모델을 빌드한 논문.

온도와 습도 센서는 LSTM, 이산화 탄소 센서는 TCN모델을 활용하여 성능을 냈다고 한다.

## 스마트팜 운영 방식 연구
- 스마트팜 환경 모니터링 및 원격제어
- 다중 센서를 이용한 스마트팜 특성 연구

위 두 연구 모두 스마트폰을 통해 환경 정보를 모니터링하고 정해진 최적 생육 환경으로 제어가 가능했지만, 데이터를 분석하고 예측 모델을 통해 최적의 생육환경 제어값을 도출하지는 않았다.

## 스마트팜 연구 동향(예찰모델 활용)
- 스마트 축사에서 축사의 환경데이터를 기반으로 학습된 딥러닝 예측 모델로 사료 공급량의 적절값 도출
- 스마트팜 토마토 환경 데이터를 기반으로 토마토 수확 기간을 예측하는 딥러닝 모델 연구
- 스마트팜 환경 데이터 기반 파프리카 엽장과 엽폭을 예측하는 다중선형회귀 모델을 제시한 연구

## 딸기 스마트팜 연구 동향
- 수확 시기를 예측할 수 있도록 딸기 이미지를 기반으로 학습한 딥러닝 분류 모델
- 딸기의 잎과 꽃 과실 이미지를 6단계의 생육 단계로 분류하고 그를 ResNet50 모델을 기반으로 학습한 연구

스마트팜 센서 및 생육환경 데이터를 기반으로 예측 모델을 활용한 연구는 다양한 작물에 적용되고 있지만 아직 딸기 작물에서는 연구가 부족한 편이라고 한다. 특히나 딸기의 경우 이미지를 중점에 맞춰 연구되고 있는 상황이라고 한다.

## 스마트팜 구성
- 스마트팜 정보
    + 길이 11,554mm, 폭 2,286mm, 높이 2,216mm의 40피트 컨테이너 사용
    + 딸기를 키우는 생육실과 생육실에 설치된 생육환경 데이터를 수집, 제어, 양액을 처리하는 제어실로 구성
    + 생육실에는 냉난방기, 칠러, 열선, 가습기, 제습기, 팬, 전열교환기, 이산화탄소 가스가 설치됨
    + 생육실 중앙에는 딸기를 생육할 수 있는 3층으로 구성된 5칸짜리 배지 프레임이 2줄로 설치됨
    + 배지 프레임에는 제어실의 양액기 파이프가 연결되고 각 칸마다 식물 성장용 LED가 설치됨
    + 제어실에는 양액통과 양액기가 설치되어 생육실의 배지 프레임으로 연결된 파이프를 통해 양액이 관수됨
- 생육환경 제어
    + 생육실에 설치된 냉난방기, 칠러, 열선, 가습기, 제습기, 팬, 전열 교환기, 이산화탄소 가스는 IoT기술이 접목된 제품을 사용하여 스마트폰 어플을 통해 생육환경 제어
    + 스마트팜의 시간별, GPS별, 생육환경 조건별 온도, 습도, 이산화탄소 농도, 식물 성장용 LED 및 공기 순환 제어
    + 해당 논문에서는 담양농업기술센터 연구사의 노하우를 기반으로 시기별, 시간별, 일출, 일몰 조건에 따라 각 변수들을 제어함

## 수집되는 데이터
- 각 데이터의 경우 제어실에 설치된 서버와 센서를 통해 RS485 유선통신 프로토콜을 통해 분단위로 수집
    + 일시, 온도, 습도, 이산화탄소 농도, 광량, 양액EC, pH농도 $\rarr$ 생육 환경 데이터
    + 온도, 습도, 이산화탄소 농도, 조도, EC, pH 센서 상태  $\rarr$ 센서 상태 모니터링

## 데이터셋 구성
- 분단위로 일시, 온도, 습도, 이산화탄소 농도, 광량, 양액EC 및 pH농도가 수집됨
- 해당 논문에서는 6월20일 0시부터 11월 15일 23시 59분까지 207,360개의 6개 센싱 데이터를 수집
- 연구사의 의견에 따라 1분 단위 데이터에서 1시간 단위 데이터로 변경
- 온도, 습도, 이산화탄소 농도 센서 데이터만을 사용하는 것으로 결정
- 최종적으로는 전체 원본 데이터로부터 6월20일 0시부터 11월 15일 23시까지 1시간 간격의 3,456개의 3개 센싱 데이터를 최종적으로 사용

## 데이터 처리 방식
- 3,456개의 3개 센싱 데이터 중 결측치는 날짜를 확인하여 NaN값 이전 시간들의 센서값의 평균값으로 대체
- 데이터의 요약 통계량은 아래 표 참고

<div align=center><img src=./df_describe.png></div>

- 3개 컬럼의 데이터는 정규화하여 사용

## 모델링
센서에서 수집되는 생육환경 데이터를 기반으로 시기별 생육환경 값을 정확히 예측하는 모델 연구는 시계열 예측 문제와 비슷함

온도, 습도, 이산화탄소 농도의 시기별 값을 예측하는 문제는 단변량 시계열 모델 예측 문제와 동일하다.

## 참고
딸기의 수량을 증대시킬 수 있는 생육 요인으로 딸기 줄기의 밑동의 굵기(관부직경)와 잎사귀의 너비(엽폭)가 큰 영향을 미치는 것으로 확인됨

전남대 농업빅데이터연구실이 출간한 논문에 관련된 내용이며, 해당 기사는 `https://www.industrynews.co.kr/news/articleView.html?idxno=24444` 여기서 확인할 수 있음


